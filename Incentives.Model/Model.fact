namespace Incentives.Model;

fact Individual {
key:
    string anonymousId;
}

fact Profile {
key:
	unique;

mutable:
	string name;

query:
	Activity* activities {
		Activity a : a.profileQuarter.profile = this
	}
}

fact Company {
key:
	string identifier;
}

fact Quarter {
key:
	Company company;
	date startDate;
}

fact Category {
key:
	unique;
	Company company;

mutable:
	string description;
}

fact ActivityDefinition {
key:
	unique;
	Category category;

mutable:
	string description;
	string qualifier;
}

fact ActivityReward {
key:
	ActivityDefinition definition;
	Quarter quarter;

mutable:
	int points;
}

fact ProfileQuarter {
key:
	Profile profile;
	Quarter quarter;
}

fact Activity {
key:
	date activityDate;
	ProfileQuarter profileQuarter;
	ActivityReward activityReward;

mutable:
	string description;
	int multiplier;
}
